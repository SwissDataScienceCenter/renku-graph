service-name = "triples-generator"

generation-processes-number = 2
generation-processes-number = ${?GENERATION_PROCESSES_NUMBER}

transformation-processes-number = 2
transformation-processes-number = ${?TRANSFORMATION_PROCESSES_NUMBER}

add-min-project-info-max-concurrent-processes = 2
add-min-project-info-max-concurrent-processes = ${?ADD_MIN_PROJECT_INFO_MAX_CONCURRENT_PROCESSES}

client-certificate = ""
client-certificate = ${?RENKU_CLIENT_CERTIFICATE}

re-provisioning-retry-delay = 1 minute

triples-generation = "renku-log"

# Defines expected version of the renku cli and the schema that is generated by the CLI.
compatibility {
  # The expected version of CLI used by TS.
  cli-version = "2.6.0rc1"

  # The expected version of the schema as returned by CLI.
  schema-version = "10"

  # If the version of CLI or schema has been changed since the last run, trigger a re-provisioning
  # if this is set to true.
  re-provisioning-needed = false
}

renku-python-dev-version = ${?RENKU_PYTHON_DEV_VERSION}

triples-generator-db {
  db-host = "localhost"
  db-host = ${?TRIPLES_GENERATOR_POSTGRES_HOST}
  db-port = 5432
  db-port = ${?TRIPLES_GENERATOR_POSTGRES_PORT}
  db-user = "triplesgenerator"
  db-user = ${?TRIPLES_GENERATOR_POSTGRES_USER}
  db-pass = "triplesgeneratorpass"
  db-pass = ${?TRIPLES_GENERATOR_POSTGRES_PASSWORD}
  db-url-template = "jdbc:postgresql://$host/$dbName"
  connection-pool = 8
  connection-pool = ${?TRIPLES_GENERATOR_POSTGRES_CONNECTION_POOL}
}

metrics-interval = "30 seconds"

services {

  triples-generator {
    url = "http://localhost:9002"
    url = ${?TRIPLES_GENERATOR_BASE_URL}
  }

  token-repository {
    url = "http://localhost:9003"
    url = ${?TOKEN_REPOSITORY_BASE_URL}
  }

  event-log {
    url = "http://localhost:9005"
    url = ${?EVENT_LOG_BASE_URL}
  }

  fuseki {
    url = "http://localhost:3030"
    url = ${?JENA_BASE_URL}
    admin {
      username = "admin"
      password = ${?JENA_ADMIN_PASSWORD}
    }
    renku {
      username = "renku"
      password = ${?JENA_RENKU_PASSWORD}
    }
  }

  gitlab {
    url = "https://renkulab.io/gitlab"
    url = ${?GITLAB_BASE_URL}
  }

  renku {
    url = ${?RENKU_URL}
  }

  sentry {
    enabled = false
    enabled = ${?SENTRY_ENABLED}
    dsn = ${?SENTRY_GRAPH_DSN}
    environment = ${?SENTRY_ENV}
    service = "triples-generator"
  }
}
